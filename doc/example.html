<html>
<head>
    <link rel="stylesheet" type="text/css" href="/static/font/Cabin.css" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!-- Conditional commenting for non-IE browsers -->
        <!--[if !IE]><!-->
            <link rel="stylesheet" type="text/css" href="example.css" />
        <!--<![endif]-->
    <!-- Conditional commenting for IE 6.x -->
        <!--[if IE]>
            <link rel="stylesheet" type="text/css" href="example.ie.css" />
        <![endif]-->
    <!--<link rel="stylesheet" href="../lib/leaflet.css" />-->
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../lib/leaflet.ie.css" />
    <![endif]-->
</head>
<title>Wicket - Lightweight Javascript for WKT [Sandbox]</title>
<!--<script src="../lib/leaflet.js"></script>-->
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
<script src="../wicket.src.js" type="text/javascript"></script>
<script src="../wicket-gmap3.src.js" type="text/javascript"></script>
<script src="../wicket-test.js" type="text/javascript"></script>
<script type="text/javascript">
var app = (function() {
    var wkt = new Wkt.Wkt();
    return {
        features: [],
        /** TODO: App 'remembers' the last WKT string because wkt is still around
         * Clears the map and the current contents of the textarea.
         */
        clearMap: function() {
            document.getElementById('wkt').value = '';
            for (i in this.features) {
                if (this.features.hasOwnProperty(i)) {
                    this.features[i].setMap(null);
                }
            }
        },
        /**
         * Maps the current contents of the textarea.
         * @return  {Object}    Some sort of geometry object
         */
        mapIt: function() {
            var obj;
            wkt.read(document.getElementById('wkt').value);
            obj = wkt.toObject(); // Make an object
            obj.setMap(app.gmap); // Add it to the map
            this.features.push(obj);
            return obj;
        },
        /**
         * Formats the textarea contents for a URL.
         * @param   checked {Boolean}   The check state of the associated checkbox
         */
        urlify: function(checked) {
            wkt.read(document.getElementById('wkt').value);
            wkt.delimiter = (checked) ? '+' : ' ';
            document.getElementById('wkt').value = wkt.write();
            return wkt;
        },
        /**
         * Application entry point.
         * @return  {<google.maps.Map>} The Google Maps API instance
         */
        init: function() {
            var gmap;
            gmap = new google.maps.Map(document.getElementById('canvas'), {
                center: new google.maps.LatLng(10, 10),
                disableDefaultUI: true,
                mapTypeControl: true,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                mapTypeControlOptions: {
                    position: google.maps.ControlPosition.TOP_LEFT,
                    style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
                },
                panControl: false,
                streetViewControl: false,
                zoom: 3,
                zoomControl: true,
                zoomControlOptions: {
                    position: google.maps.ControlPosition.LEFT_TOP,
                    style: google.maps.ZoomControlStyle.SMALL
                }
            });
            return gmap;
        }
    };
}()); // Execute immediately
</script>
<body onload="app.gmap=app.init();">
<body>
    <div id="head">
        <div class="wrapper">
            <div class="menu">
                <a href="/">Home</a>
                <a href="mailto:kaendsle@mtu.edu">Contact Me</a>
                <a href="http://github.com/arthur-e/Wicket">"Fork me on GitHub!"</a>
            </div>
        </div>
    </div>
    <div id="ribbon">
        <div class="wrapper">
            <div id="canvas">
            </div>
            <div id="controls">
                <div class="title">
                    <div class="brand">Wicket</div>
                    &nbsp;It whispers WKT in your application's ear.
                </div>
                <div class="text">
                    Wicket is a lightweight Javascript library that reads and writes Well-Known Text (WKT) strings. It can also be extended to parse and to create geometric objects from various mapping frameworks, such as the Google Maps API.
                </div>
                <div id="form">
                    <textarea type="text" name="wkt" id="wkt">MULTIPOLYGON (((40 40, 20 45, 45 30, 40 40)), ((20 35, 45 20, 30 5, 10 10, 10 30, 20 35), (30 20, 20 25, 20 15, 30 20)))</textarea>
                    <label><input type="checkbox" name="urlify" id="urlify" onchange="app.urlify(this.checked);" />Format for URLs</label>
                    <input type="submit" id="submit" value="Map It!" onclick="app.mapIt();" />
                    <input type="reset" id="reset" value="Clear Map" onclick="app.clearMap();" />
                </div>
            </div>
        </div>
    </div>
    <div id="foot">
        <div class="wrapper">
            <div class="attribute">
                &copy; 2012 K. Arthur Endsley
            </div>
        </div>
    </div>
</body>
</html>


